---
title: CLI Reference
description: Comprehensive guide to the OutRay CLI commands and flags
icon: LuSquareTerminal
---

The OutRay CLI is your primary tool for interacting with the OutRay network. This reference covers all available commands and flags.

## Commands

### `outray login`

Initiates the authentication process. This command opens your default browser to the OutRay dashboard where you can authorize the CLI.

```bash
outray login
```

Once authenticated, your session token is stored locally in your configuration file.

### `outray start`

Starts multiple tunnels from a TOML configuration file. This is useful when you need to run multiple tunnels simultaneously.

```bash
# Use default outray/config.toml
outray start

# Use a custom config file
outray start --config /path/to/config.toml
```

**Options:**

- `--config <path>`: Path to the TOML configuration file (default: `outray/config.toml`).

See the [Configuration Files](#configuration-files) section below for details on the config file format.

### `outray validate-config`

Validates a TOML configuration file without starting any tunnels. Useful for checking your config file syntax and structure.

```bash
# Validate default outray/config.toml
outray validate-config

# Validate a custom config file
outray validate-config --config /path/to/config.toml
```

**Options:**

- `--config <path>`: Path to the TOML configuration file (default: `outray/config.toml`).

### `outray <port>`

Starts a tunnel for the specified local port. This is the most common command you will use.

```bash
outray 3000
```

**Arguments:**

- `port`: The local port number you want to expose (e.g., `3000`, `8080`).

**Options:**

- `--subdomain <name>`: Request a specific subdomain.
- `--domain <domain>`: Use a custom domain.
- `--org <slug>`: Run the tunnel under a specific organization.
- `--key <token>`: Use a specific API key instead of the logged-in user.
- `--no-logs`: Disable tunnel request logs.
- `--shadow-port <port>`: Mirror traffic to another local port (HTTP only).
- `--shadow-host <host>`: Shadow target host (default: `localhost`).
- `--shadow-protocol <http|https>`: Shadow target protocol (default: `http`).
- `--shadow-sample <0-1>`: Shadow sampling rate (default: `1`).
- `--shadow-timeout <ms>`: Shadow request timeout.
- `--shadow-max-body <bytes>`: Shadow body cap in bytes.
- `--shadow-headers <h1,h2>`: Comma-separated header names to diff.

### `outray switch`

Switch between organizations. If you belong to multiple organizations, you can use this command to change your active context.

```bash
# Interactive selection
outray switch

# Direct switch
outray switch my-org-slug
```

### `outray whoami`

Displays information about the currently authenticated user and the active organization.

```bash
outray whoami
```

### `outray logout`

Clears the local authentication credentials.

```bash
outray logout
```

## Configuration Files

You can define multiple tunnels in a TOML configuration file and start them all at once using the `outray start` command.

### Config File Format

Create an `outray/config.toml` file in your project directory:

```toml
[global]
org = "my-team"
server_url = "wss://api.outray.dev/"

[tunnel.web]
protocol = "http"
local_port = 3000
local_host = "localhost"
subdomain = "my-app"
custom_domain = "app.example.com"

[tunnel.web.shadow]
target_port = 4000
target_host = "localhost"
target_protocol = "http"
sample_rate = 1
timeout_ms = 4000
max_body_bytes = 262144
compare_headers = ["content-type", "cache-control"]

[tunnel.api]
protocol = "http"
local_port = 8000
subdomain = "api"

[tunnel.postgres]
protocol = "tcp"
local_port = 5432
local_host = "localhost"
remote_port = 20000

[tunnel.game-server]
protocol = "udp"
local_port = 5000
remote_port = 30000
```

### Configuration Options

**Global Settings:**

- `org`: Default organization slug for all tunnels (can be overridden per tunnel)
- `server_url`: Tunnel server URL (optional, defaults to production server)

**Tunnel Settings:**

- `protocol`: Tunnel protocol - `"http"`, `"tcp"`, or `"udp"` (required)
- `local_port`: Local port number to expose (required, 1-65535)
- `local_host`: Local hostname (optional, defaults to `"localhost"`)
- `subdomain`: Custom subdomain for HTTP tunnels (optional, HTTP only)
- `custom_domain`: Custom domain for HTTP tunnels (optional, HTTP only)
- `remote_port`: Remote port for TCP/UDP tunnels (optional, TCP/UDP only)
- `org`: Organization slug for this tunnel (optional, overrides global setting)
- `shadow`: Shadow traffic config for HTTP tunnels (optional)

**Shadow Settings (HTTP only):**

- `target_port`: Local port to mirror requests to (required)
- `target_host`: Shadow target host (optional, defaults to `"localhost"`)
- `target_protocol`: Shadow target protocol - `"http"` or `"https"` (optional, defaults to `"http"`)
- `sample_rate`: Sampling rate between 0 and 1 (optional, defaults to 1)
- `timeout_ms`: Shadow request timeout in milliseconds (optional)
- `max_body_bytes`: Maximum body size to hash/diff (optional)
- `compare_headers`: Header names to diff (optional)

### Example Usage

```bash
# Validate your config file first
outray validate-config

# Start all tunnels from outray/config.toml
outray start

# Start tunnels from a custom config file
outray start --config production.toml
```

## Global Flags

These flags can be used with most commands:

- `--version`, `-v`: Display the current CLI version.
- `--help`, `-h`: Display help information.
- `--config <path>`: Path to config file (for `start` and `validate-config` commands).
- `--no-logs`: Disable tunnel request logs (for tunnel commands).
- `--shadow-port <port>`: Mirror traffic to another local port (HTTP only).
